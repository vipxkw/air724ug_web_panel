System.register(["./index-legacy-DqojVZIv.js","./index-legacy-BKrryVvN.js","./index-legacy-C5Fq6OBy.js","./user-legacy-DQ0lj2xF.js","./index-legacy-CA9UjppV.js","./function-call-legacy-BhebiW7j.js","./route-block-legacy-wdPIt6g0.js","./monaco-editor-legacy-CMAgFx0f.js"],(function(e,l){"use strict";var n,t,o,a,s,c,i,r,u,d,f,m,g,v,p,B,y,b,h,w,C,k,x,S,V,j,_,D,T,A,O,U,z,H,P,E,I,q,F,R,K,N,$,J,L;return{setters:[e=>{n=e.d,t=e.t,o=e.c,a=e.r,s=e.a5,c=e.V,i=e.a,r=e.w,u=e.l,d=e.a6,f=e.a7,m=e.x,g=e.o,v=e.a8,p=e.e,B=e.a9,y=e.s,b=e.q,h=e.Y,w=e.S,C=e.aa,k=e.m,x=e.ab,S=e.n,V=e.ac,j=e.ad,_=e.ae,D=e.af,T=e.ag,A=e.ah,O=e.z,U=e.A,z=e.D,H=e.Q,P=e.H,E=e.J,I=e.ai,q=e.K},e=>{F=e.C,R=e.F},e=>{K=e.C},e=>{N=e.u},e=>{$=e.B},e=>{J=e.s},e=>{L=e.b},null],execute:function(){const[l,M]=o("action-bar"),Q=Symbol(l),Y={placeholder:Boolean,safeAreaInsetBottom:t};var G=n({name:l,props:Y,setup(e,{slots:l}){const n=a(),t=s(n,M),{linkChildren:o}=c(Q);o();const r=()=>{var t;return i("div",{ref:n,class:[M(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[null==(t=l.default)?void 0:t.call(l)])};return()=>e.placeholder?t(r):r()}});const W=r(G),[X,Z]=o("action-bar-button"),ee=u({},v,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var le=n({name:X,props:ee,setup(e,{slots:l}){const n=d(),{parent:t,index:o}=f(Q),a=m((()=>{if(t){const e=t.children[o.value-1];return!(e&&"isButton"in e)}})),s=m((()=>{if(t){const e=t.children[o.value+1];return!(e&&"isButton"in e)}}));return g({isButton:!0}),()=>{const{type:t,icon:o,text:c,color:r,loading:u,disabled:d}=e;return i($,{class:Z([t,{last:s.value,first:a.value}]),size:"large",type:t,icon:o,color:r,loading:u,disabled:d,onClick:n},{default:()=>[l.default?l.default():c]})}}});const ne=r(le),[te,oe,ae]=o("dialog"),se=u({},C,{title:String,theme:String,width:S,message:[String,Function],callback:Function,allowHtml:Boolean,className:x,transition:k("van-dialog-bounce"),messageAlign:String,closeOnPopstate:t,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:t,closeOnClickOverlay:Boolean,keyboardEnabled:t,destroyOnClose:Boolean}),ce=[..._,"transition","closeOnPopstate","destroyOnClose"];var ie=n({name:te,props:se,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:l,slots:n}){const t=a(),o=p({confirm:!1,cancel:!1}),s=e=>l("update:show",e),c=l=>{var n;s(!1),null==(n=e.callback)||n.call(e,l)},r=n=>()=>{e.show&&(l(n),e.beforeClose?(o[n]=!0,j(e.beforeClose,{args:[n],done(){c(n),o[n]=!1},canceled(){o[n]=!1}})):c(n))},u=r("cancel"),d=r("confirm"),f=B((n=>{var o,a;e.keyboardEnabled&&n.target===(null==(a=null==(o=t.value)?void 0:o.popupRef)?void 0:a.value)&&({Enter:e.showConfirmButton?d:V,Escape:e.showCancelButton?u:V}[n.key](),l("keydown",n))}),["enter","esc"]),m=()=>{const l=n.title?n.title():e.title;if(l)return i("div",{class:oe("header",{isolated:!e.message&&!n.default})},[l])},g=l=>{const{message:n,allowHtml:t,messageAlign:o}=e,a=oe("message",{"has-title":l,[o]:o}),s=D(n)?n():n;return t&&"string"==typeof s?i("div",{class:a,innerHTML:s},null):i("div",{class:a},[s])},v=()=>{if(n.default)return i("div",{class:oe("content")},[n.default()]);const{title:l,message:t,allowHtml:o}=e;if(t){const e=!(!l&&!n.title);return i("div",{key:o?1:0,class:oe("content",{isolated:!e})},[g(e)])}},C=()=>n.footer?n.footer():"round-button"===e.theme?i(W,{class:oe("footer")},{default:()=>[e.showCancelButton&&i(ne,{type:"warning",text:e.cancelButtonText||ae("cancel"),class:oe("cancel"),color:e.cancelButtonColor,loading:o.cancel,disabled:e.cancelButtonDisabled,onClick:u},null),e.showConfirmButton&&i(ne,{type:"danger",text:e.confirmButtonText||ae("confirm"),class:oe("confirm"),color:e.confirmButtonColor,loading:o.confirm,disabled:e.confirmButtonDisabled,onClick:d},null)]}):i("div",{class:[A,oe("footer")]},[e.showCancelButton&&i($,{size:"large",text:e.cancelButtonText||ae("cancel"),class:oe("cancel"),style:{color:e.cancelButtonColor},loading:o.cancel,disabled:e.cancelButtonDisabled,onClick:u},null),e.showConfirmButton&&i($,{size:"large",text:e.confirmButtonText||ae("confirm"),class:[oe("confirm"),{[T]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:o.confirm,disabled:e.confirmButtonDisabled,onClick:d},null)]);return()=>{const{width:l,title:n,theme:o,message:a,className:c}=e;return i(w,y({ref:t,role:"dialog",class:[oe([o]),c],style:{width:h(l)},tabindex:0,"aria-labelledby":n||a,onKeydown:f,"onUpdate:show":s},b(e,ce)),{default:()=>[m(),v(),C()]})}}});const re=r(ie),ue=e("default",n({__name:"index",setup(e){const l=N(),n=m((()=>l.userInfo)),t=m((()=>!!n.value.name)),o=m((()=>"生活不止眼前的苟且，还有诗和远方的田野")),s=a(!1),c=a(""),r=a(""),u=a("");function d(){t.value||I.push({name:"login",query:{redirect:"profile"}})}function f(){t.value?(c.value="",r.value=n.value.name||"",u.value="",s.value=!0):d()}async function g(){if(c.value&&r.value&&u.value)try{const e=await q.post("/change-user-info",{oldPassword:c.value,newUsername:r.value,newPassword:u.value});l.userInfo.name=e.username,J(e.message||"用户信息修改成功"),s.value=!1,e.needRelogin&&(J("用户信息已修改，请重新登录"),I.push({name:"login",query:{redirect:I.currentRoute.value.fullPath}}))}catch(e){J("请求失败，请稍后再试"),console.error(e)}else J("请填写完整信息")}async function v(){try{await l.logout(),J("注销成功"),I.push({name:"login"})}catch(e){J("注销失败，请稍后再试"),console.error(e)}}return(e,l)=>{const a=F,m=K,p=R,B=re;return U(),O("div",null,[i(m,{inset:!0},{default:z((()=>[i(a,{center:"","is-link":!H(t),onClick:d},{title:z((()=>[P("span",null,E(H(t)?`${H(n).name}`:e.$t("profile.login")),1)])),label:z((()=>[P("span",null,E(H(o)),1)])),_:1},8,["is-link"])])),_:1}),i(m,{inset:!0,class:"!mt-16"},{default:z((()=>[i(a,{title:"修改用户信息",icon:"setting-o","is-link":"",onClick:f},{icon:z((()=>l[4]||(l[4]=[P("div",{class:"i-carbon:settings text-gray-400 mr-5 self-center"},null,-1)]))),_:1}),i(a,{title:"注销登录","is-link":"",onClick:v},{icon:z((()=>l[5]||(l[5]=[P("div",{class:"i-carbon:logout text-gray-400 mr-5 self-center"},null,-1)]))),_:1})])),_:1}),i(B,{show:s.value,"onUpdate:show":l[3]||(l[3]=e=>s.value=e),title:"修改用户信息","show-cancel-button":"",onConfirm:g},{default:z((()=>[i(p,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),label:"用户名",placeholder:"请输入新用户名"},null,8,["modelValue"]),i(p,{modelValue:c.value,"onUpdate:modelValue":l[1]||(l[1]=e=>c.value=e),label:"旧密码",placeholder:"请输入旧密码",type:"password"},null,8,["modelValue"]),i(p,{modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]=e=>u.value=e),label:"新密码",placeholder:"请输入新密码",type:"password"},null,8,["modelValue"])])),_:1},8,["show"])])}}}));"function"==typeof L&&L(ue)}}}));
