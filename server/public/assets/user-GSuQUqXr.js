import{A as r,ap as c,r as u,aq as i,ar as n}from"./index-f35fkoae.js";function g(e){return r.post("/login",e)}function l(){return r.post("/user/logout")}function f(){return r.get("/user/email-code")}function d(){return r.post("/user/reset-password")}function y(){return r.post("/user/register")}const o={uid:0,name:"",avatar:""},k=c("user",()=>{const e=u({...o}),a=t=>{e.value={...t}};return{userInfo:e,info:async()=>{},login:async t=>{try{const{token:s}=await g(t);s&&(i(s),e.value={...e.value,name:t.username})}catch(s){throw n(),s}},logout:async()=>{try{await l()}finally{n(),a({...o})}},getCode:async()=>{try{return await f()}catch(t){}},reset:async()=>{try{return await d()}catch(t){}},register:async()=>{try{return await y()}catch(t){}}}},{persist:!0});export{k as u};
