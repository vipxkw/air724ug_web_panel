import{d as x,t as P,n as S,c as q,V as N,o as R,a as u,W as O,p as Q,w as Z,m as $,r as B,X as W,x as Y,Y as V,Z as H,h as A,$ as J,a0 as K,y as X,j as F,a1 as G,a2 as e2,s as I,L as o2,a3 as t2,v as a2,a4 as z,e as D,z as r2,A as n2,H as E,Q as c,D as M,E as s2,J as l2}from"./index-DZHv5yw_.js";import{F as i2}from"./index-DOoUK8dJ.js";import{u as d2}from"./user-Ct5Wm9cg.js";import{B as c2}from"./index-C4j46wO8.js";import{b as T}from"./route-block-B_A1xBdJ.js";const[u2,C2]=q("form"),m2={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:S,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:P,showErrorMessage:P,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var f2=x({name:u2,props:m2,emits:["submit","failed"],setup(o,{emit:v,slots:C}){const{children:r,linkChildren:i}=N(O),n=e=>e?r.filter(t=>e.includes(t.name)):r,s=e=>new Promise((t,a)=>{const m=[];n(e).reduce((U,j)=>U.then(()=>{if(!m.length)return j.validate().then(k=>{k&&m.push(k)})}),Promise.resolve()).then(()=>{m.length?a(m):t()})}),w=e=>new Promise((t,a)=>{const m=n(e);Promise.all(m.map(f=>f.validate())).then(f=>{f=f.filter(Boolean),f.length?a(f):t()})}),p=e=>{const t=r.find(a=>a.name===e);return t?new Promise((a,m)=>{t.validate().then(f=>{f?m(f):a()})}):Promise.reject()},l=e=>typeof e=="string"?p(e):o.validateFirst?s(e):w(e),d=e=>{typeof e=="string"&&(e=[e]),n(e).forEach(a=>{a.resetValidation()})},g=()=>r.reduce((e,t)=>(e[t.name]=t.getValidationStatus(),e),{}),y=(e,t)=>{r.some(a=>a.name===e?(a.$el.scrollIntoView(t),!0):!1)},_=()=>r.reduce((e,t)=>(t.name!==void 0&&(e[t.name]=t.formValue.value),e),{}),L=()=>{const e=_();l().then(()=>v("submit",e)).catch(t=>{v("failed",{values:e,errors:t});const{scrollToError:a,scrollToErrorPosition:m}=o;a&&t[0].name&&y(t[0].name,m?{block:m}:void 0)})},h=e=>{Q(e),L()};return i({props:o}),R({submit:L,validate:l,getValues:_,scrollToField:y,resetValidation:d,getValidationStatus:g}),()=>{var e;return u("form",{class:C2(),onSubmit:h},[(e=C.default)==null?void 0:e.call(C)])}}});const g2=Z(f2),[v2,b]=q("image"),h2={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:S,height:S,radius:S,lazyLoad:Boolean,iconSize:S,showError:P,errorIcon:$("photo-fail"),iconPrefix:String,showLoading:P,loadingIcon:$("photo"),crossorigin:String,referrerpolicy:String};var w2=x({name:v2,props:h2,emits:["load","error"],setup(o,{emit:v,slots:C}){const r=B(!1),i=B(!0),n=B(),{$Lazyload:s}=W().proxy,w=Y(()=>{const e={width:V(o.width),height:V(o.height)};return H(o.radius)&&(e.overflow="hidden",e.borderRadius=V(o.radius)),e});A(()=>o.src,()=>{r.value=!1,i.value=!0});const p=e=>{i.value&&(i.value=!1,v("load",e))},l=()=>{const e=new Event("load");Object.defineProperty(e,"target",{value:n.value,enumerable:!0}),p(e)},d=e=>{r.value=!0,i.value=!1,v("error",e)},g=(e,t,a)=>a?a():u(o2,{name:e,size:o.iconSize,class:t,classPrefix:o.iconPrefix},null),y=()=>{if(i.value&&o.showLoading)return u("div",{class:b("loading")},[g(o.loadingIcon,b("loading-icon"),C.loading)]);if(r.value&&o.showError)return u("div",{class:b("error")},[g(o.errorIcon,b("error-icon"),C.error)])},_=()=>{if(r.value||!o.src)return;const e={alt:o.alt,class:b("img"),style:{objectFit:o.fit,objectPosition:o.position},crossorigin:o.crossorigin,referrerpolicy:o.referrerpolicy};return o.lazyLoad?G(u("img",I({ref:n},e),null),[[e2("lazy"),o.src]]):u("img",I({ref:n,src:o.src,onLoad:p,onError:d},e),null)},L=({el:e})=>{const t=()=>{e===n.value&&i.value&&l()};n.value?t():F(t)},h=({el:e})=>{e===n.value&&!r.value&&d()};return s&&J&&(s.$on("loaded",L),s.$on("error",h),K(()=>{s.$off("loaded",L),s.$off("error",h)})),X(()=>{F(()=>{var e;(e=n.value)!=null&&e.complete&&!o.lazyLoad&&l()})}),()=>{var e;return u("div",{class:b({round:o.round,block:o.block}),style:w.value},[_(),y(),(e=C.default)==null?void 0:e.call(C)])}}});const y2=Z(w2),L2="data:image/svg+xml,%3csvg%20width='120'%20height='120'%20viewBox='0%200%20120%20120'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M52.287%2018.4129C51.2328%2018.9517%2050.7175%2019.9824%2050.8111%2021.4582C50.8111%2021.716%2052.0995%2024.1054%2053.6456%2026.776L56.4568%2031.6252L52.0995%2039.1683C49.6867%2043.3383%2046.735%2048.4686%2045.4934%2050.6003C44.2519%2052.732%2042.9166%2055.0512%2042.5183%2055.754C42.12%2056.4567%2038.5827%2062.5709%2034.6705%2069.3412C30.7585%2076.1113%2027.4085%2081.8974%2027.2446%2082.2255C27.0571%2082.5535%2026.6588%2083.2327%2026.3543%2083.7482C26.0498%2084.2635%2025.6046%2085.06%2025.3471%2085.5052C24.9018%2086.325%2020.5915%2093.798%2019.0454%2096.3983C17.5695%2098.8814%2017.8038%20100.568%2019.7482%20101.599C20.4276%20101.95%2023.754%20101.974%2059.9707%20101.974C103.426%20101.974%20100.24%20102.091%20101.411%20100.591C102.278%2099.4905%20102.067%2098.5534%20100.24%2095.3441C99.3264%2093.7277%2098.3661%2092.041%2098.1084%2091.5958C97.4992%2090.5417%2092.5797%2082.0146%2087.2152%2072.7379C84.896%2068.7321%2082.7408%2065.0073%2082.4129%2064.4217C82.0849%2063.836%2080.6324%2061.3059%2079.1801%2058.7995C76.9312%2054.9342%2074.2607%2050.2958%2072.6207%2047.4378C72.3865%2047.0395%2070.4421%2043.6661%2068.287%2039.9414C66.1318%2036.1933%2064.164%2032.7965%2063.9298%2032.3749L63.4846%2031.6252L66.0381%2027.221C69.3177%2021.552%2069.1537%2021.8565%2069.1537%2020.8257C69.1304%2019.2093%2067.7951%2018.0381%2065.9679%2018.0381C64.609%2018.0381%2063.9062%2018.7409%2061.9385%2022.1143C60.9312%2023.8712%2060.0176%2025.3001%2059.9473%2025.3001C59.8537%2025.3001%2059.6428%2025.019%2059.4787%2024.6443C58.4012%2022.5359%2056.0586%2018.8815%2055.59%2018.5768C54.7701%2018.0381%2053.2006%2017.9443%2052.287%2018.4129ZM61.3762%2040.1055C62.079%2041.3002%2062.8756%2042.7058%2063.1567%2043.2211C63.4378%2043.7364%2064.7496%2046.0088%2066.0615%2048.2577C67.3734%2050.5066%2068.6852%2052.7789%2068.9898%2053.2942C69.2709%2053.8097%2070.2782%2055.5431%2071.2152%2057.1595C72.1523%2058.7759%2073.3471%2060.814%2073.8624%2061.7276C74.3777%2062.6179%2076.8141%2066.8345%2079.2972%2071.0981C81.7569%2075.3382%2084.0527%2079.2972%2084.3807%2079.8829C84.7086%2080.4685%2086.1141%2082.8813%2087.4963%2085.2708C88.9019%2087.6603%2090.2138%2089.9092%2090.4247%2090.3075C91.877%2092.8141%2093.3061%2095.2503%2093.47%2095.4611C93.6105%2095.6252%2090.1903%2095.6955%2083.3266%2095.672L72.9957%2095.6486L72.9721%2088.2928C72.9488%2081.8974%2072.8785%2080.773%2072.5271%2079.6485C71.4495%2076.4157%2070.2313%2074.6121%2067.7951%2072.8082C66.3192%2071.7071%2064.5387%2070.7701%2063.7892%2070.7232C63.7423%2070.6998%2063.2035%2070.5827%2062.5945%2070.3954C60.369%2069.8096%2056.2459%2070.3485%2054.1142%2071.4963C50.53%2073.4173%2047.9531%2076.8374%2047.18%2080.6324C47.0864%2081.0541%2047.0161%2084.6149%2046.9927%2088.5271V95.6653L72.9957%2095.6486L36.6149%2095.672C29.751%2095.6955%2026.331%2095.6252%2026.4715%2095.4611C26.6354%2095.2503%2028.2752%2092.4861%2029.634%2090.0733C29.9385%2089.5578%2032.6324%2084.9194%2035.6077%2079.7657C38.6061%2074.6121%2041.2533%2070.0204%2041.511%2069.5754C43.2445%2066.5534%2046.6881%2060.6267%2047.9297%2058.4948C48.7497%2057.1128%2049.4289%2055.9414%2049.4289%2055.8945C49.4289%2055.8242%2049.9444%2054.9575%2050.5769%2053.9267C51.2094%2052.8961%2051.7481%2051.9589%2051.795%2051.8419C52.0292%2051.2328%2059.8537%2037.9502%2059.9707%2037.9502C60.0409%2037.9502%2060.6734%2038.9341%2061.3762%2040.1055Z'%20fill='black'/%3e%3cpath%20d='M72.9721%2088.2928L72.9957%2095.6486L46.9927%2095.6653V88.5271C47.0161%2084.6149%2047.0864%2081.0541%2047.18%2080.6324C47.9531%2076.8374%2050.53%2073.4173%2054.1142%2071.4963C56.2459%2070.3484%2060.369%2069.8096%2062.5945%2070.3954C63.2035%2070.5826%2063.7423%2070.6998%2063.7892%2070.7232C64.5387%2070.7701%2066.3192%2071.7071%2067.7951%2072.8082C70.2313%2074.612%2071.4495%2076.4157%2072.5271%2079.6485C72.8785%2080.773%2072.9488%2081.8974%2072.9721%2088.2928Z'%20fill='%23FB4D31'/%3e%3c/svg%3e",p2="data:image/svg+xml,%3csvg%20width='120'%20height='120'%20viewBox='0%200%20120%20120'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M52.287%2018.4129C51.2328%2018.9517%2050.7175%2019.9824%2050.8111%2021.4582C50.8111%2021.716%2052.0995%2024.1054%2053.6456%2026.776L56.4568%2031.6252L52.0995%2039.1683C49.6867%2043.3383%2046.735%2048.4686%2045.4934%2050.6003C44.2519%2052.732%2042.9166%2055.0512%2042.5183%2055.754C42.12%2056.4567%2038.5827%2062.5709%2034.6705%2069.3412C30.7585%2076.1113%2027.4085%2081.8974%2027.2446%2082.2255C27.0571%2082.5535%2026.6588%2083.2327%2026.3543%2083.7482C26.0498%2084.2635%2025.6046%2085.06%2025.3471%2085.5052C24.9018%2086.325%2020.5915%2093.798%2019.0454%2096.3983C17.5695%2098.8814%2017.8037%20100.568%2019.7482%20101.599C20.4276%20101.95%2023.754%20101.974%2059.9707%20101.974C103.426%20101.974%20100.24%20102.091%20101.411%20100.591C102.278%2099.4905%20102.067%2098.5534%20100.24%2095.3441C99.3264%2093.7277%2098.3661%2092.041%2098.1083%2091.5958C97.4992%2090.5417%2092.5797%2082.0146%2087.2152%2072.7379C84.896%2068.7321%2082.7408%2065.0073%2082.4129%2064.4217C82.0849%2063.836%2080.6324%2061.3059%2079.1801%2058.7995C76.9312%2054.9342%2074.2607%2050.2958%2072.6207%2047.4378C72.3865%2047.0395%2070.4421%2043.6661%2068.287%2039.9414C66.1318%2036.1933%2064.164%2032.7965%2063.9298%2032.3749L63.4846%2031.6252L66.0381%2027.221C69.3177%2021.552%2069.1537%2021.8565%2069.1537%2020.8257C69.1304%2019.2093%2067.7951%2018.0381%2065.9678%2018.0381C64.609%2018.0381%2063.9062%2018.7409%2061.9384%2022.1143C60.9312%2023.8712%2060.0176%2025.3001%2059.9473%2025.3001C59.8536%2025.3001%2059.6428%2025.019%2059.4787%2024.6443C58.4012%2022.5359%2056.0586%2018.8815%2055.59%2018.5768C54.7701%2018.0381%2053.2006%2017.9443%2052.287%2018.4129ZM61.3762%2040.1055C62.079%2041.3002%2062.8756%2042.7058%2063.1567%2043.2211C63.4378%2043.7364%2064.7496%2046.0088%2066.0615%2048.2577C67.3734%2050.5066%2068.6851%2052.7789%2068.9898%2053.2942C69.2709%2053.8097%2070.2782%2055.5431%2071.2152%2057.1595C72.1523%2058.7759%2073.3471%2060.814%2073.8624%2061.7276C74.3777%2062.6179%2076.8141%2066.8345%2079.2972%2071.0981C81.7569%2075.3382%2084.0527%2079.2972%2084.3807%2079.8829C84.7086%2080.4685%2086.1141%2082.8813%2087.4963%2085.2708C88.9019%2087.6603%2090.2138%2089.9092%2090.4247%2090.3075C91.877%2092.8141%2093.3061%2095.2503%2093.47%2095.4611C93.6105%2095.6252%2090.1903%2095.6955%2083.3266%2095.672L72.9957%2095.6486L72.9721%2088.2928C72.9488%2081.8974%2072.8785%2080.773%2072.5271%2079.6485C71.4495%2076.4157%2070.2313%2074.6121%2067.7951%2072.8082C66.3192%2071.7071%2064.5387%2070.7701%2063.7892%2070.7232C63.7423%2070.6998%2063.2035%2070.5827%2062.5945%2070.3954C60.369%2069.8096%2056.2459%2070.3485%2054.1142%2071.4963C50.53%2073.4173%2047.9531%2076.8374%2047.18%2080.6324C47.0864%2081.0541%2047.0161%2084.6149%2046.9927%2088.5271V95.6653L72.9957%2095.6486L36.6149%2095.672C29.751%2095.6955%2026.331%2095.6252%2026.4715%2095.4611C26.6354%2095.2503%2028.2752%2092.4861%2029.634%2090.0733C29.9385%2089.5578%2032.6324%2084.9194%2035.6077%2079.7657C38.6061%2074.6121%2041.2533%2070.0204%2041.511%2069.5754C43.2445%2066.5534%2046.6881%2060.6267%2047.9297%2058.4948C48.7497%2057.1128%2049.4289%2055.9414%2049.4289%2055.8945C49.4289%2055.8242%2049.9444%2054.9575%2050.5769%2053.9267C51.2094%2052.8961%2051.7481%2051.9589%2051.795%2051.8419C52.0292%2051.2328%2059.8536%2037.9502%2059.9707%2037.9502C60.0409%2037.9502%2060.6734%2038.9341%2061.3762%2040.1055Z'%20fill='%23CCCCCC'/%3e%3cpath%20d='M72.9721%2088.2928L72.9957%2095.6486L46.9927%2095.6653V88.5271C47.0161%2084.6149%2047.0864%2081.0541%2047.18%2080.6324C47.9531%2076.8374%2050.53%2073.4173%2054.1142%2071.4963C56.2459%2070.3484%2060.369%2069.8096%2062.5945%2070.3954C63.2035%2070.5826%2063.7423%2070.6998%2063.7892%2070.7232C64.5387%2070.7701%2066.3192%2071.7071%2067.7951%2072.8082C70.2313%2074.612%2071.4495%2076.4157%2072.5271%2079.6485C72.8785%2080.773%2072.9488%2081.8974%2072.9721%2088.2928Z'%20fill='%23FB4D31'/%3e%3c/svg%3e",_2={class:"m-x-a text-center w-7xl"},b2={class:"mb-32 mt-20"},S2={class:"rounded-3xl overflow-hidden"},B2={class:"mt-16 rounded-3xl overflow-hidden"},E2={class:"mt-16"},P2=x({__name:"index",setup(o){const{t:v}=t2(),C=a2(),r=d2(),i=B(!1),n=B(z.value);A(()=>z.value,l=>{n.value=l});const s=D({username:"",password:""}),w=D({username:[{required:!0,message:v("login.pleaseEnterUsername")}],password:[{required:!0,message:v("login.pleaseEnterPassword")}]});async function p(l){try{i.value=!0,await r.login({...s,...l});const{redirect:d,...g}=C.currentRoute.value.query;d?C.push({path:d,query:{...g}}):C.push({name:"home",query:{...g}})}finally{i.value=!1}}return(l,d)=>{const g=y2,y=i2,_=c2,L=g2;return n2(),r2("div",_2,[E("div",b2,[u(g,{src:c(n)?c(p2):c(L2),class:"h-120 w-120",alt:"brand logo"},null,8,["src"])]),u(L,{model:c(s),rules:c(w),"validate-trigger":"onSubmit",onSubmit:p},{default:M(()=>[E("div",S2,[u(y,{modelValue:c(s).username,"onUpdate:modelValue":d[0]||(d[0]=h=>c(s).username=h),rules:c(w).username,name:"username",placeholder:l.$t("login.username")},null,8,["modelValue","rules","placeholder"])]),E("div",B2,[u(y,{modelValue:c(s).password,"onUpdate:modelValue":d[1]||(d[1]=h=>c(s).password=h),type:"password",rules:c(w).password,name:"password",placeholder:l.$t("login.password")},null,8,["modelValue","rules","placeholder"])]),E("div",E2,[u(_,{loading:c(i),type:"primary","native-type":"submit",round:"",block:""},{default:M(()=>[s2(l2(l.$t("login.login")),1)]),_:1},8,["loading"])])]),_:1},8,["model","rules"])])}}});typeof T=="function"&&T(P2);export{P2 as default};
